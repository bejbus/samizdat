function kind_of(a,b){return is_value(a)&&a.constructor===b}function is_value(a){return a!==null&&a!==undefined}function _(a){return L10n.gettext(a)}function N_(a){return a}Array.prototype.compact=function(a){return this.filter(kind_of(a,Function)?a:function(a){return a!==null&&a!==undefined})},Array.prototype.forEach||(Array.prototype.forEach=function(a){for(var b=0,c=this.length;b<c;b++)a(this[b])}),Array.prototype.filter||(Array.prototype.filter=function(a){var b=[];return this.forEach(function(c){a(c)&&b.push(c)}),b}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]==a)return b;return-1}),String.prototype.sprintf=function(){function m(a){c+=j?f?a(k[f-1]):l.substring(b,e+1):a(k[d]),d++}var a,b,c="",d,e,f,g,h,i,j,k=Array.prototype.slice.call(arguments),l=this;for(a=d=f=j=0;(b=this.indexOf("%",a))!=-1;a=e+1,f=j=0){c+=this.substring(a,b),e=b+1,g=this.charAt(e);do{i=0;switch(g){case"%":c+="%";break;case"s":m(function(a){return a});break;case"n":d++;break;case"i":case"d":case"u":m(parseInt);break;case"f":m(parseFloat);break;case"x":m(function(a){return(a>0?"0x":"-0x")+Math.abs(a).toString(16).toLowerCase()});break;case"X":m(function(a){return(a>0?"0x":"-0x")+Math.abs(a).toString(16).toUpperCase()});break;case"o":m(function(a){return(a>0?"0":"-0")+Math.abs(a).toString(8)});break;case"b":m(function(a){return a.toString(2)+"b"});break;case"$":while(!isNaN(h=parseInt(g=this.charAt(++e))))f=f*10+h;i=j=1;break;default:if(!isNaN(parseInt(g))){do g=this.charAt(++e);while(!isNaN(parseInt(g)));i=1}else c+=this.substring(b,e+1)}}while(i)}return c+this.substring(a)},String.prototype.format=function(){var a,b,c="",d,e,f,g;for(a=f=0;(b=this.indexOf("%",a))!=-1;a=d+1,f=0){c+=this.substring(a,b),d=b+1,e=this.charAt(d);if(e=="%")c+=e;else{while((g=parseInt(e))||g==0)f=f*10+g,e=this.charAt(++d);c+=f?arguments[f-1]+e:this.substring(b,d+1)}}return c+this.substring(a)};var L10n=function(){function g(){var c=b.slice(),e=d.slice();b=[],d=[],a={};for(var f=0,g=c.length;f<g;f++){var i=e[f];if(i!==undefined){var j=c[f];/\.js$/.test(j)||(j+=".js"),h(j,i)}}b=c,d=e}function h(a,b,d){b=[b,c,a].filter(function(a){return!!a}).join("/");var e={url:b,dataType:"script",async:!1,cache:!0};return $.isFunction(d)&&(e.complete=d),$.ajax(e)}function i(a){var b=new RegExp("(^.+/)?("+a+")$"),c;return $("script").each(function(){var a=b.exec($(this).attr("src"));a&&(c=a[1])}),c===undefined?e:c}function j(){var b=[],c;for(var d in a)c=a[d],c&&(c.constructor===String||c.constructor===Array)&&b.push(d+": "+($.isArray(c)?c.join():c));return b.join("\n")}var a={},b=[],c,d=[],e="",f={gettext:function(b){return a[b]||b},ngettext:function(b,c,d){var e=a[b];return kind_of(e,String)?e:kind_of(e,Array)?e[this.plural(d)]:d==1?b:c},plural:function(a){return a==1?0:1},add:function(b,c){if(kind_of(b,String))return c&&(a[b]=c),!0;if(kind_of(b,Object))return $.extend(a,b),!0;throw new Error("Incorrect call to L10n.add()!")},provides_domains:function(){for(var a,c=0,d=arguments.length;c<d;c++)a=arguments[c],b.indexOf(a)==-1&&b.push(a)},textdomain:function(a,c){if(b.indexOf(a)==-1){var e=b.push(a)-1;/\.js$/.test(a)||(a+=".js");var f=i(a);d[e]=f,h(a,f,c)}return a},bindtextdomain:function(a,c,e){if(arguments.lenth<2||c===undefined||a===undefined)throw new Error("arguments mismatch for bindtextdomain(domainname, dirname)");return b.indexOf(a)==-1&&(d[b.push(a)-1]=c),/\.js$/.test(a)||(a+=".js"),h(a,c,e),a},set_locale:function(a){return a&&(c?c!=a&&(c=a,g()):c=a),c},default_path:function(a){return a!==undefined&&(e=a),e}};return f}();(function(a){function f(){b.max==c&&d.toggle()}function g(a){a.unbind(),b.max!=c&&(a.after('<br /><input type="file" name="part_%1" id="f_part_%1" />'.format(++c)),h(),f())}function h(){a("#f_part_"+c).change(function(b){g(a(b.target))})}function i(){a("#f_part_1").after('<input type="button" name="addbutton" id="f_addbutton" value="%s" title="%s" />'.sprintf(_("Add more..."),_("Add one more field"))),d=a("#f_addbutton"),d.click(function(){g(a("#f_part_"+c))})}function j(){a(":reset").click(function(d){d.preventDefault(),confirm(_("Reset form to initial state?"))&&(a(this).parents("form")[0].reset(),a('[id^="f_part_"]+br,[id^="f_part_"]:gt(0)').remove(),f(),c=1,h(),a.isFunction(b.reset_helper)&&b.reset_helper(),a(".error").removeClass("error"),a(".error-notice").remove())})}function k(a,b){b=="success"&&d.val(_("Add more...")).attr("title",_("Add one more field"))}var b={max:10},c=1,d,e=!1;a.fn.dynamicform=function(c){if(!e){e=!0;try{L10n.textdomain("dynamicform",k)}catch(d){_=function(a){return a},!1}i(),h(),j()}return c&&a.extend(b,c),this}})(jQuery);var TinymceEditor=function(a){function j(a,b){b=="success"&&$('[for="tinymce_trigger"],#tinymce_trigger').attr("title",_("Enable or disable tinymce"))}function k(){tinyMCE.init({mode:"textareas",theme:"advanced"}),e[0].validate=n,e[0].unset_error=m,e[0].set_error=l,f.val(h)}function l(){$("#f_body_tbl").addClass("error")}function m(){$("#f_body_tbl").removeClass("error")}function n(){return tinyMCE.triggerSave(),!!tinyMCE.get("f_body").getContent()}function o(){f.val(h),m()}function p(){return f=$("#f_format"),g=f.val(),a&&k(),{reset_helper:o}}var b=!1,c,d="1px solid red",e=$("#f_body:visible"),f,g,h="text/html";try{L10n.textdomain("tinymce_support",j)}catch(i){_=function(a){return a},!1}return e.length?p():!1};(function(a){var c={},d={email:{validate:function(){var a=/^[a-z0-9_\.\-]+(\+[a-z0-9_\.\-]+)?@(([a-z0-9]+\-)*[a-z0-9]+\.)+[a-z]+$/i;return a.test(this.value)},errmsg:"Not a valid email is entered"},integer:{validate:function(){return/^\d+$/.test(this.value)},errmsg:"You sh'ld enter valid integer number"},number:{validate:function(){return!isNaN(parseFloat(this.value))},errmsg:"You sh'ld enter valid number"}},e=function(b){if(a.isFunction(c.check_password))return c.check_password(b);var d=8;return b!==undefined?b.length>=d:_("Bad password - shorter than %i chars").sprintf(d)},f=function(){return!/^\s*$/.test(this.value)},g=function(b){return a.isFunction(b.validate)?b.validate():f.call(b)},h=function(b){return f.call(b)&&a.isFunction(b.validate)?b.validate():!0},i=function(b,c){var d;if(c||(c=b.attr("id"))){d=a('label[for="'+c+'"]');if(d.length)return d}d=b.parents("label");if(d.length)return d},j="error-notice",k="error",l=function(a){return'<span class="'+j+'">'+a+"</span>"},m=function(b){var c,d=a(b);if(d.hasClass(k)){c=i(d,b.id);if(c){c=c.children("."+j);if(c.length)return c.remove()}d.next("."+j).remove()}},n=function(b,c){var d,e,f=a(b);e=l(b.title||_(b.errmsg||c)),d=i(f,b.id),d?d.append(e):f.after(e)},o=function(b){return b&&a.extend(c,b),this.delegate("."+j,"click",function(){alert(this),a(this).remove()}),this.each(function(){var b=a(this),c;b.submit(p);for(var e in d)b.find(".required."+e+",.optional."+e).each(function(){this.validate||(c=d[e],this.validate=c.validate,this.errmsg=c.errmsg)});b.find(".required,.optional,.mutualexclusive,:password").each(function(){a(this).focus(function(a){m(a.target)})})})},p=function(b){var c=0,d=0,f=a(b.target),i,m,o=function(a,b){return(a?p:q)(b),a},p=function(b){b.each(function(b,c){a.isFunction(c.set_error)&&c.set_error()}),b.addClass(k),c++},q=function(b){b.each(function(b,c){a.isFunction(c.unset_error)&&c.unset_error()}),b.removeClass(k)};f.find("."+j).remove(),f.find(".required").each(function(){o(!g(this),a(this))&&n(this,"Required field is empty")}),f.find(".optional").each(function(){o(!h(this),a(this))&&n(this,"Optional field is empty")});var r=[],s=/group(\d+)/,t=f.find(".mutualexclusive");t.each(function(){var b=s.exec(this.className),c=b?b[1]:0,d=r[c]||0;!c&&a(this).addClass("group0"),r[c]=g(this)?1+d:d});for(var u=0,v=r.length;u<v;u++){var w=t.filter(".group"+u);r[u]==0?(p(w),w.last().after(l(_("None of mutually exclusive fields are defined")))):r[u]>1?(p(w),w.last().after(l(_("Exacly one field from mutually exclusive fields must be defined")))):q(w)}var x;f.find(":password:not(.nocheck,.simplecheck)").each(function(){var b=a(this),c=q;x?x!=b.val()&&(c=p,b.after(l(_("Passwords are not matching")))):(x=b.val(),x==""?(c=p,b.after(l(_("Empty password")))):e(x)||(c=p,b.after(l(e()||_("Bad password"))))),c(b)}),f.find(":password.simplecheck").each(function(){o(!g(this),a(this))&&n(this,"Empty password")}),c&&b.preventDefault()},q=function(a,b,c){return b?(d[a]={validate:b,errmsg:c},this):new Object(d[a])},r={init:o,rule:q,rules:function(){return new Object(d)}};a.fn.formchecker=function(b){try{L10n.textdomain("jquery.formchecker")}catch(c){_=function(a){return a}}if(r[b])return r[b].apply(this,Array.prototype.slice.call(arguments,1));if(typeof b=="object"||!b)return r.init.apply(this,arguments);a.error("Method "+b+" does not exist in jQuery.formchecker")}})(jQuery)